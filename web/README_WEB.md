# Web Event Master

## Версия 1.0 от 20.09.2024

### 1. Описание проекта
Проект **Web Event Master** — это система для автоматизации управления и организации мероприятий через веб-приложение. Приложение позволяет пользователям выбирать и бронировать мероприятия, оплачивать их и получать проформы через веб-интерфейс.

Пользователи могут:
- Выбирать дату, время, количество участников, стиль мероприятия и другие параметры.
- Просматривать информацию о мероприятии и оплатить заказ.
- Получать проформы и подтверждения о бронировании.

Администраторы могут:
- Управлять заказами и проформами.
- Осуществлять поиск, редактирование и удаление заказов.

Сервисная служба:
- Обеспечивает поддержку и выполнение задач, связанных с функционалом проекта.
- Осуществляет управление техническими аспектами работы приложения.

### 2. Файловая структура

Проект **Web Event Master** организован по модульному принципу, что облегчает поддержку и масштабирование. Структура директорий:

```plaintext
web/
│
├── db/                                  # Директория для файлов базы данных
│   ├── init.sql                         # SQL-скрипт для инициализации базы данных
│   └── initialize_db.py                 # Скрипт для инициализации базы данных
│
├── myapp/                               # Основная логика приложения
│   ├── static/                          # Статические файлы (CSS, изображения)
│   │   ├── booking.css                  # Стиль для страницы бронирования
│   │   ├── order_payment.css            # Стиль для страницы оплаты
│   │   ├── proforma.css                 # Стиль для страницы проформы
│   │   └── styles.css                   # Общий стиль для приложения
│   ├── templates/                       # HTML-шаблоны
│   │   ├── booking.html                 # Шаблон страницы бронирования
│   │   ├── booking111.html              # Дополнительный шаблон для бронирования
│   │   ├── error.html                   # Страница ошибки
│   │   ├── forgot_password.html         # Страница восстановления пароля
│   │   ├── index.html                   # Главная страница
│   │   ├── order_payment.html           # Страница оплаты заказа
│   │   ├── proforma.html                # Страница проформы
│   │   ├── register.html                # Страница регистрации
│   │   └── reset_password.html          # Страница сброса пароля
│   ├── __init__.py                      # Инициализация пакета
│   ├── auth.py                          # Логика аутентификации
│   ├── email_utils.py                   # Утилиты для отправки почты
│   ├── forms.py                         # Формы для обработки данных
│   ├── routes.py                        # Маршруты
│   ├── translations.py                  # Переводы
│
├── utils/                               # Утилиты для работы с данными
│   ├── __init__.py                      # Инициализация пакета
│   ├── calculations.py                  # Логика расчетов
│   ├── db.py                            # Работа с базой данных
│   └── docker_command.txt               # Команды для Docker
│
├── Dockerfile_flask                     # Основной Dockerfile
├── Dockerfile_flask.save                # Сохраненный Dockerfile
├── README_WEB.md                        # Документация для веб-приложения
└── run.py                               # Запуск приложения

## 3. Архитектура

### 3.1 Принцип модульности

Проект **Web Event Master** организован по принципу модульности, где каждый компонент выполняет свою задачу:

- **Основные модули** — обрабатывают взаимодействие с пользователями, включая формы бронирования, расчет стоимости, оформление проформ и отправку уведомлений.
- **Вспомогательные модули** — обеспечивают работу с базой данных, авторизацию, оплату и другие технические процессы.

### 3.2 Перечень модулей и их функций

1. **`booking`** (основной) — обработка данных формы бронирования.
   - Функции: `render_booking_form()`, `process_booking_form()`

2. **`payment`** (основной) — обработка данных платежей, интеграция с платежной системой.
   - Функции: `handle_payment()`, `process_payment()`

3. **`proforma`** (основной) — генерация проформы на основании данных бронирования.
   - Функции: `generate_proforma()`, `save_proforma()`

4. **`users`** (вспомогательный) — обработка пользовательских данных, регистрация и авторизация.
   - Функции: `register_user()`, `login_user()`, `get_user_data()`

5. **`utils`** (вспомогательный) — вспомогательные функции для работы с базой данных и другими сервисами.
   - Функции: `create_connection()`, `execute_query()`

6. **`translations`** (вспомогательный) — переводы и локализация для многоязычного интерфейса.
   - Функции: `get_translations()`, `get_translation_for_language()`

## 4. Нововведения версии 1.0

- Добавлена базовая функциональность для бронирования мероприятий через веб-форму.
- Интеграция с системой Stripe для обработки платежей.
- Генерация проформ для пользователей после оформления бронирования.
- Улучшение системы авторизации пользователей.

## 5. Примечания

- Важно, чтобы для корректной работы веб-приложения был установлен и настроен сервер базы данных PostgreSQL.
- Перед запуском приложения необходимо настроить переменные окружения (см. `.env`).

## 6. Алфавитный указатель всех функций

### B

- **`render_booking_form()`**  
  Отображает форму для бронирования мероприятия.

- **`process_booking_form()`**  
  Обрабатывает данные, введенные пользователем в форме бронирования, и сохраняет их в базе данных.

### C

- **`create_connection()`**  
  Создает соединение с базой данных PostgreSQL.

- **`execute_query()`**  
  Выполняет SQL-запрос с параметрами и логирует выполнение.

### G

- **`generate_proforma()`**  
  Генерирует проформу на основе данных бронирования.

### P

- **`process_payment()`**  
  Обрабатывает платеж через интеграцию с Stripe.

### S

- **`save_proforma()`**  
  Сохраняет сгенерированную проформу в базе данных.

- **`send_proforma_to_user()`**  
  Отправляет пользователю сгенерированную проформу через email.

### T

- **`get_translations()`**  
  Получает переводы для текущего языка приложения.

### U

- **`register_user()`**  
  Регистрирует нового пользователя в системе.

- **`login_user()`**  
  Осуществляет процесс авторизации пользователя.

